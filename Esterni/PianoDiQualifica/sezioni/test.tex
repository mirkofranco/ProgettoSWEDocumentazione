\chapter{Specifica dei test}
\label{test}
\section{Test di Sistema}
\normalsize
\begin{longtable}{|c|>{}m{8cm}|c|}
\hline 
\textbf{Id Test} & \textbf{Descrizione} & \textbf{Stato}\\
\hline
\endhead
\hypertarget{TSFO1}{TSFO1} & Viene verificato che la connessione della skill al suo account Amazon possa avvenire correttamente & \textit{Implementato}\\ \hline
\hypertarget{TSFO2}{TSFO2} & Il gruppo esegue l'applicazione e controlla che il login funzioni correttamente & \textit{Implementato}\\ \hline
\hypertarget{TSFO15}{TSFO15} & Eseguire l'applicazione, creare un nuovo workflow, aggiungere dei blocchi a piacere e salvare il workflow. Bisogna verificare che il workflow sia presente nel database & \textit{Implementato}\\ \hline
\hypertarget{TSFO16}{TSFO16} & Avviare l'applicazione ed eliminare un workflow & \textit{Implementato}\\ \hline
\hypertarget{TSFO17.1}{TSFO17.1} & Avviare l'applicazione e modificare il nome di un workflow, poi verificare che sia stato effettivamente modificato nel database & \textit{Implementato}\\ \hline
\hypertarget{TSFO17.2}{TSFO17.2} & Il test consiste nell'eseguire l'applicazione e modificare un workflow aggiungendo un blocco, modificandone un altro ed eliminandone un terzo. In seguito verificare che il database sia stato effettivamente modificato. & \textit{Implementato}\\ \hline
\hypertarget{TSFO45}{TSFO45} & Viene verificato che il collegamento della skill all'account dell'utente Amazon avvenga correttamente & \textit{Implementato}\\ \hline
\hypertarget{TSVO1}{TSVO1} & Viene verificato che l'applicazione Android funzioni correttamente in un dispositivo Android & \textit{Implementato}\\ \hline
\caption[Test di Sistema]{Test di Sistema}
\label{tabella:test1}
\end{longtable}
\clearpage

\section{Tracciamento Requisiti-Test di Sistema}
\normalsize
\begin{longtable}{|>{\centering}m{5cm}|m{5cm}<{\centering}|}
\hline
\textbf{Requisito} & \textbf{Test}\\
\hline
\endhead
RFO1 & \hyperlink{TVFO1}{TVFO1}\\ \hline
RFO2 & \hyperlink{TVFO2}{TVFO2}\\ \hline
RFO15 & \hyperlink{TVFO15}{TVFO15}\\ \hline
RFO16 & \hyperlink{TVFO16}{TVFO16}\\ \hline
RFO17.1 & \hyperlink{TVFO17.1}{TVFO17.1}\\ \hline
RFO17.2 & \hyperlink{TVFO17.2}{TVFO17.2}\\ \hline
RFO45 & \hyperlink{TVFO45}{TVFO45}\\ \hline
RVO1 & \hyperlink{TVVO1}{TVVO1}\\ \hline
\caption[Tracciamento Requisiti-Test di Sistema]{Tracciamento Requisiti-Test di Sistema}
\label{tabella:requi-tv}
\end{longtable}
\clearpage


\section{Test di Integrazione}
\normalsize
\begin{longtable}{|c|>{}m{8cm}|c|}
\hline 
\textbf{Id Test} & \textbf{Descrizione} & \textbf{Stato}\\
\hline
\endhead
\hypertarget{TI1}{TI1} & Viene testata l'applicazione Android ad ogni sua modifica nel repository Github, attraverso Travis-CI. L'applicazione deve compilare e non produrre warning. & \textit{Implementato}\\ \hline
\hypertarget{TI2}{TI2} & La skill Android è soggetta a integrazione continua, attraverso Travis-CI. & \textit{Implementato}\\ \hline
\hypertarget{TI3}{TI3} & La skill viene pubblicata in automatico (ad ogni modifica nel repository) in AWS Lambda e viene eseguito un test per controllare che funzioni. Questo test non assicura il funzionamento della skill, quindi è necessario un controllo umano (più controlli sono richiesti in caso di un numero alto di commit nel repository). & \textit{Implementato}\\ \hline
\hypertarget{TI4}{TI4} & Ad ogni commit nel repository, Travis-CI controlla che il collegamento tra la Skill e AWS API-Gateway funzioni. Questo viene fatto attraverso una semplice chiamata post a una funzione MOCK (per ridurre il traffico a dynamoDB e alle lambda). & \textit{Implementato}\\ \hline
\hypertarget{TI5}{TI5} & Controllare che il collegamento tra API-gateway, Lambda e DynamoDB funzioni, eseguendo dei test automatici appositi. Questa operazione deve essere eseguita poco frequentemente, in quanto potrebbe aumentare i costi dei servizi AWS. & \textit{Implementato}\\ \hline
\hypertarget{TI6}{TI6} & Viene creato un workflow contenente solamente blocchi con connettori e vengono valutati i risultati. I valori ritornati cambiano costantemente, quindi viene fatto un controllo solamente sul tipo dei dati ritornati. & \textit{Implementato}\\ \hline
\hypertarget{TI7}{TI7} & Viene eseguita l'applicazione e viene controllato se le activities vengono rappresentate correttamente a schermo. Questo test è molto pesante, in quanto richiede l'esecuzione del simulatore Android, inoltre richiede supervisione di un membro del gruppo. & \textit{Implementato}\\ \hline
\hypertarget{TI8}{TI8} & Vengono create delle istanze dei blocchi disponibili e vengono chiamati i loro metodi pubblici. & \textit{Implementato}\\ \hline
\hypertarget{TI9}{TI9} & Viene creato un workflow contenente tutti i blocchi, poi viene chiamato il metodo "response()" di workflow. & \textit{Implementato}\\ \hline
\caption[Test di Integrazione]{Test di Integrazione}
\label{tabella:test2}
\end{longtable}
\clearpage

\section{Tracciamento Test di Integrazione-Componenti}
\normalsize
\begin{longtable}{|>{\centering}m{3cm}|m{9cm}<{\centering}|}
\hline
\textbf{Test} & \textbf{Componente}\\
\hline
\endhead
\hyperlink{TI1}{TI1} & \texttt{megalexa}\\ \hline
\hyperlink{TI2}{TI2} & \texttt{MegAlexaSkill}\\ \hline
\hyperlink{TI3}{TI3} & \texttt{MegAlexaSkill::lambda}\\ \hline
\hyperlink{TI4}{TI4} & \texttt{MegAlexaSkill::lambda::connection}\\ \hline
\hyperlink{TI5}{TI5} & \texttt{megalexa::adapters}\\ \hline
\hyperlink{TI6}{TI6} & \texttt{megalexa::adapters::connectors}\\ \hline
\hyperlink{TI7}{TI7} & \texttt{megalexa::activities}\\ \hline
\hyperlink{TI8}{TI8} & \texttt{megalexa::models::blocks}\\ \hline
\hyperlink{TI9}{TI9} & \texttt{MegAlexaSkill::lambda::blocks}\\ \hline
\caption[Tracciamento Test di Integrazione-Componenti]{Tracciamento Test di Integrazione-Componenti}
\label{tabella:ts-requi}
\end{longtable}
\clearpage


\section{Test di Unità}
\label{TU}
La parte della skill è stata sviluppata utilizzando l'approccio Test Driven Development, mentre per l'app Android non era un vincolo. Alcuni test più ostici da sviluppare sono stati rimandati al periodo di verifica e collaudo. 
\normalsize
\begin{longtable}{|c|m{12em}|c|}
\hline 
\textbf{Id Test} & \textbf{Descrizione} & \textbf{Stato}\\
\hline
\endhead
TUS1 & Viene controllato che ritorni un testo & \textit{Implementato}\\ \hline
TUS2 & Viene controllato che venga lanciata un'eccezione sul tipo di parametro passato & \textit{Implementato}\\ \hline
TUS3 & Viene controllato che venga lanciata un'eccezione sul valore di ritorno (check sui falsi positivi)  & \textit{Implementato}\\ \hline
TUS4 & Viene controllato che ritorni una lista & \textit{Implementato}\\ \hline
TUS5 & Viene controllato che venga lanciata un'eccezione sul tipo di parametro passato & \textit{Implementato}\\ \hline
TUS6 & Viene controllato che venga lanciata un'eccezione sul valore di ritorno & \textit{Implementato}\\ \hline
TUS7 & Viene controllato che ritorni una richiesta di inserimento pin & \textit{Implementato}\\ \hline
TUS8 & Viene controllato che ritorni una risposta di pin corretto & \textit{Implementato}\\ \hline
TUS9 & Viene controllato che ritorni una risposta di pin errato & \textit{Implementato}\\ \hline
TUS10 & Viene controllato che ritorni un workflow corretto & \textit{Implementato}\\ \hline
TUS11 & Viene controllato che ritorni un workflow non corretto & \textit{Implementato}\\ \hline
TUS12 & Viene controllato che ritorni una eccezione sul parametro durante la creazione del workflow & \textit{Implementato}\\ \hline
TUS13 & Viene controllato che ritorni un workflow corretto & \textit{Implementato}\\ \hline
TUS13 & Viene controllato che ritorni una eccezione sulla costruzione dell'utente & \textit{Implementato}\\ \hline
TUS14 & Viene controllato che ritorni un FeedRSS corretto & \textit{Implementato}\\ \hline
TUS15 & Viene controllato che venga lanciata un'eccezione sul tipo di parametro URL & \textit{Implementato}\\ \hline
TUS16 & Viene controllato che venga lanciata un'eccezione di Timeout sulla chiamata internet & \textit{Implementato}\\ \hline
TUS17 & Viene controllato che ritorni una previsione corretta & \textit{Implementato}\\ \hline
TUS18 & Viene controllato che venga lanciata un'eccezione sul parametro position & \textit{Implementato}\\ \hline
TUS19 & Viene controllato che ritorni un testo vuoto & \textit{Implementato}\\ \hline
TUS20 & Viene controllato che venga lanciata un'eccezione sul parametro position & \textit{Implementato}\\ \hline
TUS21 & Viene controllato che venga lanciata un'eccezione di Timeout sulla chiamata internet alle API & \textit{Implementato}\\ \hline
TUS22 & Viene controllato che ritorni un tweet corretto & \textit{Implementato}\\ \hline
TUS23 & Viene controllato che ritorni un tweet vuoto & \textit{Implementato}\\ \hline
TUS24 & Viene controllato che venga lanciata un'eccezione sul parametro userID & \textit{Implementato}\\ \hline
TUS25 & Viene controllato che venga lanciata un'eccezione di Timeout sulla chiamata internet alle API di Twitter & \textit{Implementato}\\ \hline
TUS26 & Viene controllato che ritorni un workflow vuoto & \textit{Implementato}\\ \hline
TUS27 & Viene controllato che venga lanciata un'eccezione sulla mancanza di un blocco filterable dopo un filtro & \textit{Implementato}\\ \hline
TUS28 & Viene controllato che ritorni un workflow correttamente filtrato & \textit{Implementato}\\ \hline
TUS29 & Viene controllato che ritorni una lista correttamente filtrata & \textit{Implementato}\\ \hline
TUS30 & Viene controllato che ritorni un Feed RSS correttamente filtrato & \textit{Implementato}\\ \hline
TUS31 & Viene controllato che ritorni una lista di email correttamente filtrate & \textit{Implementato}\\ \hline
TUS32 & Viene controllato che ritorni una lista di email corrette & \textit{Implementato}\\ \hline
TUS33 & Viene controllato che ritorni una lista di email vuota & \textit{Implementato}\\ \hline
TUS34 & Viene controllato che venga lanciata un'eccezione sull'email non corretta & \textit{Implementato}\\ \hline
TUS35 & Viene controllato che ritorni una lista di Email corrette & \textit{Implementato}\\ \hline
\caption[Test di Unità]{Test di Unità}
\label{tabella:test2}
\end{longtable}
\clearpage

\normalsize
\begin{longtable}{|c|m{12em}|c|}
\hline 
\textbf{Id Test} & \textbf{Descrizione}  & \textbf{Stato}\\
\hline
\endhead

TUA1 & Viene controllato che un blocco borsa risulti non valido con un URL non valido & \textit{Implementato}\\ \hline
TUA2 & Viene controllato che un blocco borsa risulti valido con un URL idoneo & \textit{Implementato}\\ \hline
TUA3 & Viene controllato che un blocco calendario risulti non valido a fronte di input non previsti& \textit{Implementato}\\ \hline
TUA4 & Viene controllato che un blocco calendario risulti valido a fronte di un input corretto & \textit{Implementato}\\ \hline
TUA5 & Viene controllato che un blocco crypto risulti non valido con un URL non valido & \textit{Implementato}\\ \hline
TUA6 & Viene controllato che un blocco crypto risulti valido con un URL idoneo & \textit{Implementato}\\ \hline
TUA7 & Viene controllato che un blocco feedRSS risulti non valido con un URL non valido & \textit{Implementato}\\ \hline
TUA8 & Viene controllato che un blocco feedRSS risulti valido con un URL idoneo & \textit{Implementato}\\ \hline
TUA9 & Viene controllata la validità di un blocco filtro attaccato a un blocco valido & \textit{Implementato}\\ \hline
TUA10 & Viene controllata la non validità di un blocco filtro se attaccato a un blocco non idoneo& \textit{Implementato}\\ \hline
TUA11 & Viene controllata la non validità  di un blocco lista rispetto a un input non corretto & \textit{Implementato}\\ \hline
TUA12 & Viene controllata la validità di un blocco lista rispetto a un input corretto & \textit{Implementato}\\ \hline
TUA13 & Viene controllato che un blocco news risulti non valido con un URL non valido  & \textit{Implementato}\\ \hline
TUA14 & Viene controllato che un blocco news risulti valido con un URL idoneo& \textit{Implementato}\\ \hline
TUA15 & Viene controllata la non validità di un blocco pin rispetto a un input non corretto & \textit{Implementato}\\ \hline
TUA16 & Viene controllata la validità di un blocco pin rispetto a un pin corretto & \textit{Implementato}\\ \hline
TUA17 & Viene controllata la non validità di un blocco mail rispetto a un input non corretto& \textit{Implementato}\\ \hline
TUA18 & Viene controllata la valdità di un blocco mail rispetto a un input corretto & \textit{Implementato}\\ \hline
TUA19 & Viene controllato che un blocco sport risulti non valido con un URL non valido& \textit{Implementato}\\ \hline
TUA20 & Viene controllato che un blocco sport risulti valido con un URL idoneo& \textit{Implementato}\\ \hline
TUA21 & Viene controllato che un blocco di testo risulti non valido con un input maggiore di 256 caratteri& \textit{Implementato}\\ \hline
TUA22 & Viene controllato che un blocco di testo risulti valido rispetto a un input corretto& \textit{Implementato}\\ \hline
TUA23 & Viene controllato che un blocco Twitter-hashtag risulti non valido con un input non corretto& \textit{Implementato}\\ \hline
TUA24 & Viene controllato che un blocco Twitter-hashtag risulti valido con un input corretto& \textit{Implementato}\\ \hline
TUA25 & Viene controllato che un blocco Twitter-HomeTL risulti non valido con un input non corretto& \textit{Implementato}\\ \hline
TUA26 & Viene controllato che un blocco Twitter-HomeTL risulti valido con un input corretto & \textit{Implementato}\\ \hline
TUA27 & Viene controllato che un blocco Twitter risulti non valido con un input non corretto& \textit{Implementato}\\ \hline
TUA28 & Viene controllato che un blocco Twitter risulti valido con un input corretto& \textit{Implementato}\\ \hline
TUA29 & Viene controllato che un blocco Twitter-Write risulti non valido con un input non corretto& \textit{Implementato}\\ \hline
TUA30 & Viene controllato che un blocco Twitter-Write risulti valido con un input corretto& \textit{Implementato}\\ \hline
TUA31 & Viene controllato che il connettore del blocco borsa stabilisca correttamente la connessione e restituisca un risultato non valido rispetto a un input non corretto& \textit{Implementato}\\ \hline
TUA32 & Viene controllato che il connettore del blocco borsa stabilisca correttamente la connessione e restituisca un risultato valido rispetto a un input corretto& \textit{Implementato}\\ \hline
TUA33 & Viene controllato che il connettore del blocco calendario stabilisca correttamente la connessione e restituisca un risultato non valido rispetto a un input non corretto& \textit{Implementato}\\ \hline
TUA34 & Viene controllato che il connettore del blocco calendario stabilisca correttamente la connessione e restituisca un risultato valido rispetto a un input corretto& \textit{Implementato}\\ \hline
TUA35 & Viene controllato che il connettore del blocco crypto stabilisca correttamente la connessione e restituisca un risultato non valido rispetto a un input non corretto& \textit{Implementato}\\ \hline
TUA37 & Viene controllato che il connettore del blocco crypto stabilisca correttamente la connessione e restituisca un risultato valido rispetto a un input corretto& \textit{Implementato}\\ \hline
TUA38 & Viene controllato che il connettore del blocco feedRSS stabilisca correttamente la connessione e restituisca un risultato valido rispetto a un input corretto& \textit{Implementato}\\ \hline
TUA39 & Viene controllato che il connettore del blocco feedRSS stabilisca correttamente la connessione e restituisca un risultato non valido rispetto a un input non corretto& \textit{Implementato}\\ \hline
TUA40 & Viene controllato che il connettore del blocco news stabilisca correttamente la connessione e restituisca un risultato valido rispetto a un input corretto& \textit{Implementato}\\ \hline
TUA41 & Viene controllato che il connettore del blocco news stabilisca correttamente la connessione e restituisca un risultato non valido rispetto a un input non corretto& \textit{Implementato}\\ \hline
TUA42 & Viene controllato che il connettore del blocco sport stabilisca correttamente la connessione e restituisca un risultato valido rispetto a un input corretto& \textit{Implementato}\\ \hline
TUA43 &  Viene controllato che il connettore del blocco sport stabilisca correttamente la connessione e restituisca un risultato non valido rispetto a un input non corretto& \textit{Implementato}\\ \hline
TUA44 & Viene controllato che il connettore del blocco meteo risulti non valido se inserito un input non corretto& \textit{Implementato}\\ \hline
TUA45 &  Viene controllato che il connettore del blocco meteo risulti valido se viene inserita una città correttamente& \textit{Implementato}\\ \hline
TUA46 & & \textit{Implementato}\\ \hline
TUA47 & & \textit{Implementato}\\ \hline
TUA48 & & \textit{Implementato}\\ \hline


\caption[Test di Unità]{Test di Unità}
\label{tabella:test2}
\end{longtable}
\clearpage

\normalsize
\begin{longtable}{|c|m{24em}|}
\hline 
\textbf{Id Test} & \textbf{Funzione}\\
\hline
\endhead
TUS1 & Lambda::blocks::TextToSpeechBlock::text()\\ \hline
TUS2 & Lambda::blocks::TextToSpeechBlock::text()\\ \hline
TUS3 & Lambda::blocks::TextToSpeechBlock::text()\\ \hline
TUS4 & Lambda::blocks::BlockList::text()\\ \hline
TUS5 & Lambda::blocks::BlockList::text()\\ \hline
TUS6 & Lambda::blocks::BlockList::text()\\ \hline
TUS7 & Lambda::blocks::BlockPIN::text()\\ \hline
TUS8 & Lambda::blocks::BlockPIN::text()\\ \hline
TUS9 & Lambda::blocks::BlockPIN::text()\\ \hline
TUS10 & Lambda::workflow::alexaResponse()\\ \hline
TUS11 & Lambda::workflow::alexaResponse()\\ \hline
TUS12 & Lambda::services::WorkflowService::create()\\ \hline
TUS13 & Lambda::user::workflow()\\ \hline
TUS13 & Lambda::user::workflow()\\ \hline
TUS14 & Lambda::blocks::BlockFeedRSS::text()\\ \hline
TUS15 & Lambda::blocks::BlockFeedRSS::text()\\ \hline
TUS16 & Lambda::connectors::BlockFeedRSS::connect()\\ \hline
TUS17 & Lambda::blocks::BlockWeather::text()\\ \hline
TUS18 & Lambda::blocks::BlockWeather::text()\\ \hline
TUS19 & Lambda::blocks::BlockWeather::text()\\ \hline
TUS20 & Lambda::connectors::ConnectorWeather::connect()\\ \hline
TUS21 & Lambda::connectors::ConnectorWeather::connect()\\ \hline
TUS22 & Lambda::blocks::BlockTwitterRead::text()\\ \hline
TUS23 & Lambda::blocks::BlockTwitterRead::text()\\ \hline
TUS24 & Lambda::connectors::ConnectorTwitterRead::connect()\\ \hline
TUS25 & Lambda::connectors::ConnectorTwitterRead::connect()\\ \hline
TUS26 & Lambda::user::workflow()\\ \hline
TUS27 & Lambda::user::filter()\\ \hline
TUS28 & Lambda::user::filter()\\ \hline
TUS29 & Lambda::blocks::BlockList::filterBlocks()\\ \hline
TUS30 & Lambda::blocks::BlockList::filterBlocks()\\ \hline
TUS31 & Lambda::blocks::BlockList::filterBlocks()\\ \hline
TUS32 & Lambda::blocks::BlockEmailRead::text()\\ \hline
TUS33 & Lambda::blocks::BlockEmailRead::text()\\ \hline
TUS34 & Lambda::connectors::ConnectorEmailRead::connect()\\ \hline
TUS35 & Lambda::connectors::ConnectorEmailRead::connect()\\ \hline
\caption[Test di Unità]{Test di Unità}
\label{tabella:test2}
\end{longtable}
\clearpage

\normalsize
\begin{longtable}{|c|m{28em}|}
	\hline 
	\textbf{Id Test} & \textbf{Funzione}\\
	\hline
	\endhead
	TUA1 & package com.megalexa::ConnectorFeedTest::valid() \\ \hline
	TUA2 & package com.megalexa::BlockFilterTest::withFilterableBlock() \\ \hline
	TUA3 & package com.megalexa::BlockFilterTest::withNonFilterableBlock() \\ \hline
	TUA4 & package com.megalexa::AppBuilderTest::valid() \\ \hline
	TUA5 & package com.megalexa::GetUserTest::valid() \\ \hline
	TUA6 & package com.megalexa::ModelSingletonTest::valid() \\ \hline
	TUA7 & package com.megalexa::ConnectorWeatherTest::valid()\\ \hline
	TUA8 & package com.megalexa::ConnectorTwitterTest::AccountValid() \\ \hline
	TUA9 & package com.megalexa::ConnectorTwitterTest::HashtagValid()\\ \hline
	TUA10 & package com.megalexa::ConnectorAmazonMusicTest::Valid()\\ \hline
	TUA11 & package com.megalexa::ConnectorCalendarTest::Valid() \\ \hline
	TUA12 & package com.megalexa::ConnectorReadMailTest::Valid() \\ \hline
	TUA13 & package com.megalexa::ConnectorTelegramTest::Valid()\\ \hline
	TUA14 & package com.megalexa::ConnectorTwitterTest::AccountValid() \\ \hline
	TUA15 & package com.megalexa::ConnectorAmazonMusicTest::Exist()\\ \hline
	TUA16 & package com.megalexa::ConnectorAmazonMusicTest::Exist()\\ \hline
	TUA17 & package com.megalexa::ConnectorTelegramTest::isEmpty()\\ \hline
	TUA18 & package com.megalexa::ConnectorTelegramTest::Valid()\\ \hline
	\caption[Test di Unità]{Test di Unità}
	\label{tabella:test2}
\end{longtable}
\clearpage
