stages:
  - "grammar"
  - name: "compile"
    if: branch = develop 
before_install:
  - sudo apt-get update
  - sudo apt-get install hunspell
  - sudo apt-get install myspell-en-us
  - sudo apt-get install myspell-it
  - sudo apt-get install python-dev libxml2-dev libxslt1-dev antiword unrtf poppler-utils pstotext tesseract-ocr flac lame libmad0 libsox-fmt-mp3 sox libjpeg-dev swig libpulse-dev
  - pip install --user textract 
  - sudo apt-get install -y --no-install-recommends texlive-full
jobs:
  include:
    - stage: "grammar"
      script:
       - bash scripts/grammar.sh
    - stage: "compile"
      script:
       - cd Esterni/PianoProgetto
       - pdflatex -synctex=1 -interaction=nonstopmode -halt-on-error PianoDiProgetto.tex
       - pdflatex -synctex=1 -interaction=nonstopmode -halt-on-error PianoDiProgetto.tex
       - cd ../../
       - cd Interni/NormeDiProgetto
       - pdflatex -synctex=1 -interaction=nonstopmode -halt-on-error NormeDiProgetto.tex
       - pdflatex -synctex=1 -interaction=nonstopmode -halt-on-error NormeDiProgetto.tex
       - cd ../../
      - stage: "gulpease"
        script:
         - cd Esterni/PianoProgetto
         - pdflatex -synctex=1 -interaction=nonstopmode -halt-on-error PianoDiProgetto.tex
         - pdflatex -synctex=1 -interaction=nonstopmode -halt-on-error PianoDiProgetto.tex
         - cd ../../
         - cd Interni/NormeDiProgetto
         - pdflatex -synctex=1 -interaction=nonstopmode -halt-on-error NormeDiProgetto.tex
         - pdflatex -synctex=1 -interaction=nonstopmode -halt-on-error NormeDiProgetto.tex
         - cd ../../
notifications:
  slack: zerosevengroup:awH2p9uSzEPY9plMSyKBtAHF
